<!--
/*
 * Copyright 2018 ABSA Group Limited
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with  the License.
 * You may obtain a copy of the License at
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->

<div *ngIf="!isShow">
  <clr-control-container>
    <label>Frequency</label>

    <div class="clr-select-wrapper">
      <select class="clr-select" clrControl [(ngModel)]="freq">
        <option *ngFor="let option of frequencies" [selected]="freq==option.value" [value]="option.value">
          {{option.label}}</option>
      </select>
    </div>
  </clr-control-container>
</div>

<div *ngIf="!isShow">
  <clr-control-container>

    <div class="form-group">
      <input *ngIf="freq == 2" [readOnly]="false" clrControl value="{{ value }}"
        (change)="onFreeText($event.target.value)" [size]="24">

      <input *ngIf="freq == 2" [readOnly]="true" clrControl
        value="{{ validCron ? readableCronExpression : 'please update with a correct expression.'}}" [size]="60" />
    </div>

    <span *ngIf="freq == 1">Every</span>

    <div class="clr-select-wrapper" *ngIf="freq == 1">
      <select class="clr-select" clrControl [(ngModel)]="base">
        <option *ngFor="let option of userFriendly" [selected]="base==option.value" [value]="option.value">
          {{option.label}}</option>
      </select>
    </div>

    <span *ngIf="base == 3 && freq == 1">at</span>

    <div class="clr-select-wrapper" *ngIf="base == 3 && freq == 1">
      <select class="clr-select" clrControl [(ngModel)]="dayValue" (change)="onDaySelect($event.target.value)">
        <option *ngFor="let option of hourValues" [selected]="dayValue==option" [value]="option">{{option}}</option>
      </select>
    </div>

    <div class="clr-select-wrapper" *ngIf="base == 2 && freq == 1">
      <select class="clr-select" clrControl [(ngModel)]="hourValue" (change)="onHourSelect($event.target.value)">
        <option *ngFor="let option of minuteValues" [selected]="hourValue==option" [value]="option">{{option}}</option>
      </select>
    </div>

    <div class="clr-select-wrapper" *ngIf="base == 1 && freq == 1">
      <select class="clr-select" clrControl [(ngModel)]="minuteValue" (change)="onMinuteSelect($event.target.value)">
        <option *ngFor="let option of minutesValues" [selected]="minuteValue==option" [value]="option">{{option}}
        </option>
      </select>
    </div>

    <span *ngIf="base == 3 && freq == 1"> : {{ dayMinuteValue }}</span>

    <span *ngIf="base == 2 && freq == 1"> minutes past the hour</span>

    <span *ngIf="base == 1 && freq == 1"> minutes</span>

  </clr-control-container>
</div>

<div *ngIf="isShow">
  <clr-control-container>
    <label>Frequency</label>

    <input [readOnly]="true" clrControl value="{{ readableCronExpression }}" [size]="60" />

  </clr-control-container>
</div>