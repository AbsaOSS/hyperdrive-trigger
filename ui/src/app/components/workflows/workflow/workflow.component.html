<!--
  ~ Copyright 2018 ABSA Group Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="loading" *ngIf="loading">
    <span class="spinner spinner-inverse">
        Loading...
    </span>
</div>

<div *ngIf="!loading">

  <!--  BUTTONS  -->
  <div class="btn-group" *ngIf="mode != workflowModes.SHOW">
    <button type="button" class="btn btn-sm btn-secondary" *ngIf="mode != workflowModes.EDIT">
      <clr-icon shape="check"></clr-icon>
      Create new workflow
    </button>
    <button type="button" class="btn btn-sm btn-secondary" *ngIf="mode == workflowModes.EDIT">
      <clr-icon shape="check"></clr-icon>
      Update workflow
    </button>
    <button type="button" class="btn btn-sm btn-secondary">
      <clr-icon shape="times"></clr-icon>
      Cancel
    </button>
  </div>

  <div class="btn-group" *ngIf="mode == workflowModes.SHOW">
    <button type="button" class="btn btn-sm btn-secondary">
      <clr-icon shape="power"></clr-icon>
      Activate/Deactivate
    </button>
    <button type="button" class="btn btn-sm btn-secondary" [routerLink]="[absoluteRoutes.COPY_WORKFLOW, id]">
      <clr-icon shape="copy"></clr-icon>
      Copy
    </button>
    <button type="button" class="btn btn-sm btn-secondary" [routerLink]="[absoluteRoutes.EDIT_WORKFLOW, id]">
      <clr-icon shape="pencil"></clr-icon>
      Edit
    </button>
    <button type="button" class="btn btn-sm btn-secondary" (click)="deleteWorkflow(this.id)">
      <clr-icon shape="close"></clr-icon>
      Delete
    </button>
  </div>

  <!--  ACCORDIONS  -->
  <form clrForm>

    <div class="clr-row">
      <div class="clr-col">
        <div class="card">
          <div class="card-block">
            <div class="card-title notSelectable" (click)="toggleDetailsAccordion()">
              <clr-icon shape="angle" [dir]="isDetailsAccordionHidden?'right':'down'"></clr-icon>
              Workflow details
            </div>
            <div *ngIf="!isDetailsAccordionHidden" class="accordion-content">
              <app-workflow-details></app-workflow-details>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-block">
            <div class="card-title notSelectable" (click)="toggleSensorAccordion()">
              <clr-icon shape="angle" [dir]="isSensorAccordionHidden?'right':'down'"></clr-icon>
              Sensor
            </div>
            <div *ngIf="!isSensorAccordionHidden" class="accordion-content">
              <app-sensor></app-sensor>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-block">
            <div class="card-title notSelectable" (click)="toggleJobsAccordion()">
              <clr-icon shape="angle" [dir]="isJobsAccordionHidden?'right':'down'"></clr-icon>
              Jobs
            </div>
            <div *ngIf="!isJobsAccordionHidden">
              <app-jobs></app-jobs>
            </div>
          </div>

        </div>
      </div>
    </div>
  </form>

</div>
